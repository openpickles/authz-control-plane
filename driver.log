  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.3.0)

2026-01-02T21:41:10.776+05:30  INFO 74343 --- [           main] o.o.p.e.r.ReferenceAppApplication        : Starting ReferenceAppApplication v0.0.1-SNAPSHOT using Java 24.0.1 with PID 74343 (/Users/mb/workspace/policy-engine/policy-engine-reference-app/target/policy-engine-reference-app-0.0.1-SNAPSHOT.jar started by mb in /Users/mb/workspace/policy-engine)
2026-01-02T21:41:10.778+05:30 DEBUG 74343 --- [           main] o.o.p.e.r.ReferenceAppApplication        : Running with Spring Boot v3.3.0, Spring v6.1.8
2026-01-02T21:41:10.778+05:30  INFO 74343 --- [           main] o.o.p.e.r.ReferenceAppApplication        : No active profile set, falling back to 1 default profile: "default"
WARNING: A restricted method in java.lang.System has been called
WARNING: java.lang.System::load has been called by org.apache.tomcat.jni.Library in an unnamed module (jar:nested:/Users/mb/workspace/policy-engine/policy-engine-reference-app/target/policy-engine-reference-app-0.0.1-SNAPSHOT.jar/!BOOT-INF/lib/tomcat-embed-core-10.1.24.jar!/)
WARNING: Use --enable-native-access=ALL-UNNAMED to avoid a warning for callers in this module
WARNING: Restricted methods will be blocked in a future release unless native access is enabled

2026-01-02T21:41:11.350+05:30  INFO 74343 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 9090 (http)
2026-01-02T21:41:11.358+05:30  INFO 74343 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-02T21:41:11.358+05:30  INFO 74343 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.24]
2026-01-02T21:41:11.378+05:30  INFO 74343 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-02T21:41:11.379+05:30  INFO 74343 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 551 ms
2026-01-02T21:41:11.495+05:30  INFO 74343 --- [           main] o.o.p.engine.client.PolicyEngineClient   : Starting Policy Engine Client for bundle: reference-app-bundle
2026-01-02T21:41:11.496+05:30  INFO 74343 --- [           main] o.o.p.e.c.transport.WebSocketTransport   : Connecting to WebSocket at ws://localhost:8080/ws
2026-01-02T21:41:11.578+05:30  INFO 74343 --- [lient-AsyncIO-2] o.o.p.e.c.transport.WebSocketTransport   : Connected to Policy Engine Control Plane
2026-01-02T21:41:11.578+05:30  INFO 74343 --- [           main] o.o.p.e.c.transport.WebSocketTransport   : Subscribing to /topic/bundles/reference-app-bundle
2026-01-02T21:41:11.765+05:30  INFO 74343 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 9090 (http) with context path '/'
2026-01-02T21:41:11.785+05:30  INFO 74343 --- [           main] o.o.p.e.r.ReferenceAppApplication        : Started ReferenceAppApplication in 1.278 seconds (process running for 1.564)
2026-01-02T21:41:12.353+05:30  INFO 74343 --- [nio-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-02T21:41:12.354+05:30  INFO 74343 --- [nio-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-02T21:41:12.355+05:30  INFO 74343 --- [nio-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-02T21:41:13.228+05:30  INFO 74343 --- [lient-AsyncIO-3] o.o.p.e.c.transport.WebSocketTransport   : PAYLOAD RECEIVED RAW: {"specversion":"1.0","id":"3727c2f2-72be-42c7-9a04-2b9a69f29aae","source":"policy-engine","type":"org.openpickles.policy.bundle.update","datacontenttype":"application/json","data":{"downloadUrl":"http://localhost:8080/api/v1/bundles/1/download","bundleName":"reference-app-bundle","version":"4f816faa-6d24-4a5d-b0ed-01c7fe69da7d"}}
2026-01-02T21:41:13.256+05:30  INFO 74343 --- [lient-AsyncIO-3] o.o.p.engine.client.PolicyEngineClient   : Received policy update event: ID=3727c2f2-72be-42c7-9a04-2b9a69f29aae, Source=policy-engine
2026-01-02T21:41:13.275+05:30  INFO 74343 --- [lient-AsyncIO-3] o.o.p.engine.client.PolicyEngineClient   : Bundle 'reference-app-bundle' updated to version '4f816faa-6d24-4a5d-b0ed-01c7fe69da7d'. Downloading from: http://localhost:8080/api/v1/bundles/1/download
Adding Auth Header: Basic YWRt...
2026-01-02T21:41:13.433+05:30  INFO 74343 --- [lient-AsyncIO-3] o.o.p.engine.client.PolicyEngineClient   : Downloaded bundle content (size: 146 bytes)
MOCKED OPA: Received bundle for reference-app-bundle
2026-01-02T21:41:13.446+05:30  INFO 74343 --- [lient-AsyncIO-3] o.o.p.engine.client.PolicyEngineClient   : Successfully pushed bundle to OPA
